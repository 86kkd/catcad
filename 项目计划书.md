# 项目概述
## 背景
  - EDA（电子设计自动化）技术是指包括电路系统设计、系统仿真、设计综合、PCB版图设计和制版的一整套自动化流程。EDA是电子设计的基石产业，是电子信息产业的支柱产业之一。根据国内咨询机构的报告，目前国内市场，国外厂商占据了95%份额，而国产厂商仅仅占据了5%的份额。但是，国产EDA软件的发展前景依然广阔。据预测，2023年中国EDA行业市场规模将达到约100亿元人民币，未来几年，EDA市场将保持高速增长电子设计自动化（EDA）工具的使用已成为电子产品开发的关键环节。嘉立创EDA作为国产EDA工具的代表，一直致力于为工程师提供全面的电子设计解决方案。然而，尽管取得了一定的成就，但仍然面临着一些挑战，尤其是在在线工作方式、文件支持、自动布线算法以及PCB设计方面存在一些问题。
- 在线工作方式
  - 随着云计算和在线协作的兴起，工程师们更加倾向于采用在线工作方式，以便随时随地协同完成项目。然而，嘉立创EDA在这方面仍需进一步完善，以提供更便捷、高效的在线协作平台。
- 文件支持的问题
  - Multisim和Proteus等EDA工具在电路仿真方面取得了显著的进展，然而嘉立创EDA软件在对multisim和Proteus仿真文件的支持方面也存在明显的不足。仿真后的文件不能直接转换，而需要进行重新设计，这不仅提高了人工失误的概率，还进一步拖延了项目的交付时间。同时这种文件支持的滞后性对设计过程中的无缝转换和集成带来了一定困扰。
- 自动布线算法的不足
  - 面对中等的电路布局和多层板的PCB设计，市面上自动布线算法表现不佳生成的布线结果与设计要求不符。导致设计者需要花费更多的时间进行大量的手动调整来解决布线问题，增加了设计的迭代次数和时间成本。，从而减缓整体设计流程。
  - 设计效率低
- PCB绘制设计的流畅度问题
  - PCB绘制设计在整个电子产品开发过程中占据着至关重要的位置。然而，嘉立创EDA在这方面的用户界面交互设计存在一些不合理之处，导致设计过程不够流畅。例如过于繁杂和深层次的菜单结构增加了工程师查找和使用特定功能的难度，降低整体的操作效率。这可能影响到工程师的工作效率，从而降低项目整体的推进速度。
  - 切换视图的方式不方便，导致工程师在查看原理图和pcb等不同部分时感到困扰，降低了整体操作的流畅性。
  - UI的交互响应速度较慢，例如拖动元件或连接线时的延迟降低了设计过程的流畅性，使得用户体验不佳。

  
## 目的
- 在电子设计领域，轻度电子爱好者常常需要一个简单易用、功能强大的工具来实现他们的创意。我们致力于设计一款小而美的EDA软件，旨在通过提供专注于 PCB 绘制的流畅体验，为轻度电子爱好者和初学者创造一个易用而高效的设计工具。我们软件的核心特色是专注于 PCB 绘制，将仿真文件的转换过程简化为一步，使得设计者能够更快速地将仿真结果转换为pcb电路板加速想法到成品的实现。我们希望这款软件以直观简洁的用户界面为特色，采用清晰的图标和简单的拖放操作，使用户能够轻松理解和使用软件。仿真文件的转换接口被设计成直观易用，使得用户能够在不费力的情况下将仿真文件一键转换，无需繁琐的操作，即可进入 PCB 绘制的阶段。在放置阶段使用大语言模型提供对话式放置建议，为设计者提供和优化元器件的放置方案。元器件布局结束后设计者可以使用自动布线辅助布线，软件可以根据设计师的调整实时提供新的布线方案，为设计者提供更灵活、更精准的设计结果。最后设计者可以在软件中实时共享设计文件，观察团队成员的操作，同时与其他爱好者进行协同工作，分享经验和设计灵感。

## 创新点
- 交互式自动布线  
将深度学习技术应用于实时自适应布线。通过与用户交换实时更改PCB布线方案，提供更智能、个性化的建议。
- 对话式建议生成  
通过对话框的方式提供实时的元器件放置建议有助于提高用户对建议的理解和接受度，使设计调整更加灵活。
- 协同设计功能  
引入了协同设计，允许多人共同编辑设计文件、互动交流，有助于团队协作，提高设计效率。
- 实时标注和注释  
提供实时标注和注释功能，使设计师能够更直观地传达设计意图。这增加了设计交流的效率，有助于团队协同工作。
- 模块化的构想和插件系统  
通过插件系统实现功能模块的插件化，为用户提供更灵活的定制和扩展。
- 多窗口显示pcb层  
用户可以在不同的窗口中同时编辑不同的 PCB 层，提高了操作的直观性和实时性。这使得用户可以更准确地进行元器件的放置和布线。
- 跨平台  
适配linux windows

# 技术方案
## 总体架构
- 架构图
  - 模块化设计

## 功能概述
- UI设计  
`启动动画`
软件启动时，采用简洁而流畅的启动动画，使用户感受到轻盈和现代感。Logo的逐渐渐显现，配合淡入淡出的过渡效果，为用户创造愉悦的初始体验。  
`快捷键客制化`
快捷键应该是设计师高效操作的关键。通过响应快捷键，软件能够迅速弹出设置窗口，用户可以方便地进行个性化的快捷键设置。  
`全局设置命令查找`
设计一个全局设置命令查找功能，使用户可以通过简单的关键字搜索快速找到所需设置。通过这种快速的设置访问方式提高了用户对软件功能的掌握度，减少了学习成本。  
`匹配元件高亮显示和小窗口提示`
当用户使用关键字查找时，匹配的元件应该在整个界面中高亮显示，并同时在屏幕边缘弹出一个小窗口，显示匹配元件的位置。提供直观而实用交互式的提示方式。  
`仿真文件转换动画 ` 
在拖入仿真文件后，转换原理图的过程应该以动画的形式呈现。元件的逐渐出现、连接线的逐渐展开，为用户提供直观的转换过程，提P操作的流畅性。  
`布线方案动态显示`
PCB布线方案的展示应采用动态变化的方式。初始状态下，使用浅色展示辅助设计的布线方案，帮助用户快速了解设计方向。当布线方案确定后，以高饱和度的颜色显示，强调方案的稳定性。  
`多窗口显示pcb层 ` 
PCB层次可以通过多窗口的方式进行显示，每个窗口代表不同的层次结构。这些窗口可以自由拖拽、调整大小，为用户提供高度自定义的工作环境。窗口之间的切换可以采用平滑的动画效果。  
`自动设置窗口`
;软件可以智能地为用户自动设置窗口，根据用户的操作习惯和频繁使用的功能进行窗口布局的自动调整。这种智能设置可以大大提高用户的工作效率。


- 模块化设计  
`功能模块化`
将软件的功能模块化，使其成为一个可插拔的架构。每个功能模块都是一个独立的插件，具有清晰的接口和依赖关系。这样的设计使得用户可以根据需求自由组合和扩展功能。  
`插件下载中心`
引入一个插件下载中心，用户可以在其中浏览、搜索和下载各种功能模块的插件。下载中心提供了一个便捷的途径，用户可以根据自身需求快速获取所需的功能，并将其集成到软件中。  
`插件版本控制`
实现插件的版本控制系统，确保用户在软件中使用的插件是兼容当前软件版本的。避免因为不同版本之间的不匹配导致的问题。  
`插件权限管理`
为了确保软件的稳定性和安全性，设计一个插件权限管理系统。用户可以在插件中设置权限，限制其访问软件的某些核心功能。有助于防范潜在的安全风险。  
`收费模式拓展`
在模块化构想的基础上，未来可以引入收费模式。一些高级、专业化的插件可以通过付费的方式提供，以支持软件的持续发展和维护。用户可以选择购买这些付费插件，从而进一步拓展软件的功能。  


- 自动布线  
`完成度优先`
首先确保自动布线的完成度，即通过算法尽可能连接所有元件，形成一个初步的布线方案。这能够确保在设计初期用户能够快速获得一个可行的 PCB 布线，提高设计效率。  
`实时自适应调整`
引入实时自适应辅助布线功能，使用户在布线过程中能够随时查看布线方案。同时自适应用户进行手动调整，如元件的重新放置、调整元件之间的间距等并重新给出布线方案。使用户能够更灵活地优化布线。  
`自动优化布线`
利用深度强化学习技术，训练算法以优化自动布线方案。通过对大量布线案例进行学习，使算法能够逐渐提高在不同场景下的优化能力。  
`用户布线历史学习`
利用深度学习技术，对用户的布线历史进行学习和分析。系统可以通过学习用户的设计风格和偏好，为每个用户提供个性化的自动布线建议，提高用户满意度。  


- 对话式放置建议  
`实时布线和放置分析`
软件应该具备实时布线和放置分析的能力，通过算法对元器件的布线和放置效果进行实时监测和分析。这为系统提供了基础数据，以便生成准确的放置建议。  
`对话式建议生成`
在用户进行元器件放置操作的同时，软件通过对话框的方式向用户提供实时的放置建议。这可以是简单的文字提示，如“将电源与地线间距拉大可提高电路稳定性”，或者更详细的建议，如“将放大器模块靠近传感器可降低信号干扰”。  
`自然语言交互`
采用自然语言交互，使得软件的建议更易理解和接受。通过人性化的语言表达，软件能够向用户解释建议的原因，提高用户对建议的信任度，并促进更深层次的用户参与。  
`上下文感知`
系统应该具备上下文感知的能力，能够理解用户的具体设计目标和约束条件。这样，软件生成的对话式建议可以更好地贴合用户的实际需求，增加建议的实用性。  
`用户反馈和调整`
提供一个用户反馈机制，让用户可以对系统的建议进行评价和反馈。这有助于系统不断学习用户的设计偏好，提高对话式建议的精准度。同时，用户也可以通过对话框直接调整元器件的放置，实现即时的设计调整。  
`智能学习算法`
引入智能学习算法，通过不断分析用户的互动和反馈，逐步优化对话式建议的生成模型。这可以是基于机器学习的方法，通过模型训练不断提高建议的准确性。  
`可视化支持`
在对话框中引入可视化支持，如示意图、动画等形式，更直观地展示放置建议的效果。这样的设计可以帮助用户更好地理解建议，提高用户的决策效率。  


- 协同设计  
`设计工程文件共享`
用户可以在软件中轻松共享整个设计工程文件。通过云存储或内建的共享平台，设计师可以邀请其他用户加入协同设计，实现多人共同参与一个设计项目。  
`互动窗口交流`
在软件中集成互动窗口，设计师之间可以实时交流、分享意见和提供建议。这个窗口可以支持文字、图形、甚至是实时注释的形式，以便更直观地沟通设计细节。
- dcr检测  
`检测dcr错误`软件能够智能地检测电路中潜在的DCR错误。通过实时监测电路，系统会立即捕捉到这些问题，并提示设计者进行进一步的检查。  
`错误定位与高亮显示`，当系统检测到DCR错误时，会准确指示错误的位置，并在电路图中以高亮显示的方式突出显示问题元器件或连接。这样，设计者能够迅速定位问题，减少排查时间。   
`历史记录`软件还将记录DCR错误的历史数据，并提供趋势分析。通过分析历史数据，设计者可以了解电路中经常出现的问题，进而改善设计流程和元器件选用。
- 多格式文件转换  
`格式转换`软件将自动适应不同工具的文件格式如：lceda封装文件，Multisim和Proteus仿真文件并确保转换后的文件在目标工具中能够正确识别和使用。保证用户在不同工具之间进行文件交换时不会丢失关键信息。
## 关键技术
- 深度强化学习自动布线
  - `状态表示与特征提取`  
  深度强化学习首先要解决的问题是如何有效地表示电路布局的状态。这需要将电路的拓扑结构、连接关系以及元器件的位置等信息进行编码。采用适当的状态表示和特征提取方法，能够在保留关键信息的同时降低状态空间的维度，提高学习效率。
  - `经验回放机制`  
  自动布线问题的决策往往是序列性的，需要考虑之前的状态和动作。为了更好地利用历史经验，我们查阅资料引入了经验回放机制，即从历史经验中随机抽样进行训练。这有助于提高模型的稳定性和收敛性。
  - `动作空间定义`  
  在自动布线问题中，动作空间指的是在电路板上移动、连接、调整元器件的所有可能操作。深度强化学习需要定义合适的动作空间，以便智能体能够选择适当的动作来改进布线。动作空间的设计需要综合考虑电路设计的复杂性和可行性。
  - `探索与利用的平衡`  
  在自动布线中，有时需要进行探索以发现新的布局可能性，有时需要利用已知信息以确保合理的设计。深度强化学习需要在探索与利用之间找到平衡，避免过度依赖过去的策略或者盲目地进行探索。
  - `策略网络与值函数`  
  采用策略网络和值函数来优化决策策略。策略网络负责输出动作的概率分布，而值函数评估给定状态下采取某个动作的长期回报。通过训练这两个网络，智能体可以更准确地选择动作，从而提高自动布线的效果。
  - `数据集介绍`
    - ISPD 2012 Contest Dataset:  来源：该数据集来自于 ISPD 2012 的自动布线竞赛。这个竞赛提供了多个电路的设计文件，包括设计规范、电路图、布局等信息。
    特点： 数据集涵盖了复杂且真实的电路设计，具有挑战性。反映了当时电子设计领域的一些典型问题和需求。
    - OLD MLCAD 2023 FPGA MacroPlacement Contest Dataset 来源： 该数据集是为 OLD MLCAD 2023 FPGA MacroPlacement Contest 而准备的。这个竞赛旨在推动 FPGA 宏放置的研究，因此数据集涉及了与 FPGA 布局相关的问题。
    特点： 数据集包含了专注于 FPGA 架构的电路设计，强调了宏放置的挑战和需求。这使得它成为研究电子元器件布局问题的有力资源。
- 对话式放置建议  
  - `自然语言处理（NLP）技术`  
  对话式放置建议依赖于与设计工程师的自然语言交流。自然语言处理技术允许系统理解工程师的需求、约束和意图。关键技术包括语义分析、命名实体识别和情感分析，以确保准确理解用户输入的自然语言信息。  
  - `图神经网络（GNN）`  
  电路设计可以被看作是一个图的问题，其中元器件之间存在复杂的连接关系。图神经网络能够学习并理解电路的拓扑结构，从而更好地生成合理的放置建议。GNN 在捕捉元件之间关系和优化整体布局方面具有独特的优势。  
  - `多模态融合`  
  模态融合技术允许系统综合利用多种输入信息，包括自然语言描述、图形表示和设计规范等。通过融合不同模态的信息，模型能够更全面地理解用户的需求，生成更准确的放置建议。  
  - `生成式模型`  
  生成式模型能够以序列方式生成电路元件的放置建议。这些模型通常基于循环神经网络（RNN）或变换器（Transformer）等结构，能够处理变长的输入序列，逐步生成电路元件的位置信息。
  - `迁移学习`  
  移学习技术可以在不同的设计任务之间共享已学到的知识。通过在相关任务上进行预训练，模型可以更快地适应新的设计场景，提高对话式放置建议的效果。

## 其他技术
- 前端UI开发
  - `启动动画`  
  使用 Vue.js 中的过渡效果来实现启动动画。通过添加 CSS 类名的方式，定义启动时的过渡效果，让应用在启动时呈现出平滑的过渡。
  - `匹配元件高亮显示和小窗口提示`  
  利用 Vue.js 的指令功能，创建一个自定义指令，用于处理匹配元件的高亮显示。通过在相应元素上添加该指令，可以触发高亮效果。同时，使用 Vue.js 的弹框组件或者Tooltip 组件来实现小窗口提示。
  - `仿真文件转换动画`  
  利用 Vue.js 中的过渡效果来创建仿真文件转换的动画。当文件转换结束时，触发动画效果，提高用户体验。你可以通过 Vue.js 提供的 v-enter、v-leave-to 类名来自定义动画的进入和离开效果。
  - `布线方案动态显示`
  使用 Vue.js 的数据绑定和计算属性来实现布线方案的动态显示。当布线方案改变时，通过数据绑定的方式自动更新界面上的显示。考虑使用echarts等图表库来展示动态的布线方案。
  - `多窗口显示 PCB 层`  
  利用 Vue.js 的组件化开发思想，创建 PCB 层的组件。通过管理组件状态，可以在同一个页面上实现多个 PCB 层的显示。考虑使用Vue Router来处理多窗口间的导航和状态管理。
  - `自动设置窗口`  
  使用 Vue.js 中的生命周期钩子函数（如 mounted）来在组件渲染完成后自动设置窗口。可以结合Element UI或Ant Design Vue等 UI 组件库，以便更方便地创建和管理窗口组件。
  - `互动窗口交流`  
  集成实时通信组件，例如 Chat 组件，以便设计工程师能够在互动窗口中交流、分享想法、提问等。
  - `设计工程文件共享`  
  集成支持文件上传的组件，如 Dropzone.js，以便用户方便地上传设计文件。
- 后端设计
  - `Express.js`  
  使用 Express.js 构建 Node.js 后端服务器，处理设计文件的上传、下载和共享。
  - `Multer`  
  用 Multer 中间件处理设计文件的上传。Multer 是一个 Node.js 中的文件上传中间件，可以处理文件上传并保存到服务器。
  - `MongoDB` 
  存储设计工程文件的元数据，例如文件名、上传时间、创建者等信息。MongoDB 是一种非常适合文档型数据的数据库，易于集成。
  - `Socket.io`      
  使用 Socket.io 实现实时双向通信。通过实时通信，支持设计工程师之间的互动窗口交流。
  - `Express.js`  
  使用 Express.js 或其他 Node.js 框架处理 WebSocket 连接的路由和事件。


# 项目计划
## 可行性分析
- 技术可行性  
  Node.js是一个非常适合构建实时应用的平台，具有高效的事件驱动架构和良好的可扩展性。它适用于处理大量并发请求，非常适合实时通信和在线协同工作。使用WebSocket和Socket.io能够实现实时的双向通信，这是实现在线协同设计和互动窗口交流的核心技术。选择MongoDB作为后端数据库，因其能够存储文件的元数据，并支持快速的读写操作。这有助于实现设计文件的共享和管理。

- 风险分析  
  - 强化学习和大语言模型的应用风险  
    风险评估：中等  
    利好因素： 强化学习和大语言模型在多个领域表现优异，获得预训练的模型相对容易。  
    风险因素： 在PCB领域应用相对较新，可能缺乏大规模的训练数据和成熟的应用案例。 
  - 应用领域成熟度  
    风险评估：中等  
    利好因素： PCB领域应用的发展潜力巨大，有望通过技术创新提高设计效率 。  
    风险因素： 目前在此领域的应用相对较少，可能面临与实际设计需求的匹配问题。 
  - 数据和案例不足  
    风险评估：高  
    利好因素： 有望通过数据收集和案例研究来弥补不足。  
    风险因素： PCB设计的多样性和复杂性使得获取充足的、多样化的数据和案例可能相对困难。  
  - 前后端技术风险  
    风险评估：低  
    利好因素： 前后端技术已趋于完善，成熟的框架和库可保证基础功能的实现。  
    风险因素： 需要确保所选技术的稳定性和可维护性。  
- 综合考虑各方面风险，项目整体风险评估为中等。强化学习和大语言模型应用在PCB设计领域的新颖性和挑战性使得项目在技术创新和实际应用方面都需要认真评估和应对潜在的问题。同时，前后端技术的相对完善性为项目提供了良好的基础。为降低风险，建议在初期进行充分的市场调研和技术验证，确保所选择的技术和模型在PCB设计领域的适用性。
## 排期规划
- 时间估算
  - 后端开发  
    任务： 后端服务器搭建、数据库设计  
    时间： 3周  
  - 前端开发  
    任务： 前端界面设计、用户交互实现  
    时间： 3周  
  - 强化学习和大语言模型集成  
    任务： 集成预训练模型，开发自适应自动布线和对话式放置建议功能  
    时间： 5周  
- 里程碑设定
  - 项目启动  
    &nbsp;&nbsp;  时间： 第1周  
    验证设计完成  
    &nbsp;&nbsp;  时间： 第2周  
    后端和前端开发完成  
    &nbsp;&nbsp;  时间： 第5周  
    强化学习和大语言模型集成完成  
    &nbsp;&nbsp;  时间： 第10周  
    系统测试完成  
    &nbsp;&nbsp; 时间： 第11周  
    项目交付  
    &nbsp;&nbsp;  时间： 第12周